# ═══════════════════════════════════════════════════════════════
# Agent Registry — Environment Variables
# ═══════════════════════════════════════════════════════════════
# Copy to .env and fill in values.
# Cloud provider: Google Cloud Platform (GCP)

# ─── Core ───
ENV=development
BASE_URL=http://localhost:8000
DATABASE_URL=postgresql+asyncpg://api_user:localdev@localhost:5432/agent_registry
TEST_DATABASE_URL=postgresql+asyncpg://api_user:localdev@localhost:5432/agent_registry_test
REDIS_URL=redis://localhost:6379/0

# ─── A2A / Agent Card ───
REQUIRE_AGENT_CARD=false

# ─── Auth / Signatures ───
SIGNATURE_MAX_AGE_SECONDS=30
NONCE_TTL_SECONDS=60

# ─── Fee Schedule ───
# Old flat fee (deprecated, kept for backward compat)
PLATFORM_FEE_PERCENT=0.025
# New split-fee model
FEE_BASE_PERCENT=0.01
FEE_VERIFICATION_PER_CPU_SECOND=0.01
FEE_VERIFICATION_MINIMUM=0.05
FEE_STORAGE_PER_KB=0.001
FEE_STORAGE_MINIMUM=0.01

# ─── Blockchain / Wallet (USDC on Base L2) ───
# Network: "base_sepolia" (testnet) or "base_mainnet"
BLOCKCHAIN_NETWORK=base_sepolia
# Leave empty to auto-resolve from network:
# BLOCKCHAIN_RPC_URL=
# USDC_CONTRACT_ADDRESS=

# ─── Wallet Limits ───
MIN_DEPOSIT_AMOUNT=1.00
MIN_WITHDRAWAL_AMOUNT=1.00
MAX_WITHDRAWAL_AMOUNT=100000.00
WITHDRAWAL_FLAT_FEE=0.50
DEPOSIT_CONFIRMATIONS_REQUIRED=12
DEV_DEPOSIT_ENABLED=false

# ─── MoltBook Identity ───
MOLTBOOK_API_URL=https://moltbook.com/api/v1
MOLTBOOK_REQUIRED=false
MOLTBOOK_MIN_KARMA=0

# ─── Email ───
# Backend: "log" (dev, prints to console) or "smtp" (production)
EMAIL_BACKEND=log
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_FROM_ADDRESS=noreply@agent-registry.example.com
EMAIL_VERIFICATION_REQUIRED=false

# ─── Secrets Backend ───
# "env" (dev), "gcp_secrets" (production on GCP)
SECRETS_BACKEND=env
# For gcp_secrets: your GCP project ID
GCP_PROJECT_ID=

# ─── CORS ───
# Comma-separated or JSON list
CORS_ALLOWED_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# ─── Webhooks ───
WEBHOOK_TIMEOUT_SECONDS=10
WEBHOOK_MAX_RETRIES=5

# ─── Test Runner / Sandbox ───
TEST_RUNNER_TIMEOUT_PER_TEST=60
TEST_RUNNER_TIMEOUT_PER_SUITE=300
TEST_RUNNER_MEMORY_LIMIT_MB=256

# ─── Rate Limiting ───
RATE_LIMIT_DISCOVERY_CAPACITY=60
RATE_LIMIT_DISCOVERY_REFILL_PER_MIN=20
RATE_LIMIT_READ_CAPACITY=120
RATE_LIMIT_READ_REFILL_PER_MIN=60
RATE_LIMIT_WRITE_CAPACITY=30
RATE_LIMIT_WRITE_REFILL_PER_MIN=10
RATE_LIMIT_REGISTRATION_CAPACITY=5
RATE_LIMIT_REGISTRATION_REFILL_PER_MIN=2
RATE_LIMIT_SIGNUP_CAPACITY=1
RATE_LIMIT_SIGNUP_REFILL_PER_MIN=1


# ═══════════════════════════════════════════════════════════════
# SECRETS — sensitive values, never commit to source control
# ═══════════════════════════════════════════════════════════════

# HMAC signing key for platform-issued tokens (rotate before production!)
PLATFORM_SIGNING_KEY=dev-signing-key-not-for-production

# HD wallet seed for deriving per-agent deposit addresses (BIP-39 mnemonic)
# Generate: python -c "from mnemonic import Mnemonic; print(Mnemonic('english').generate(128))"
HD_WALLET_MASTER_SEED=

# Treasury wallet for processing withdrawals (private key hex, no 0x prefix)
# Must hold USDC + ETH (for gas) on the configured network
TREASURY_WALLET_PRIVATE_KEY=

# SMTP credentials (when EMAIL_BACKEND=smtp)
SMTP_USERNAME=
SMTP_PASSWORD=

# MoltBook developer API key (moltdev_...)
MOLTBOOK_API_KEY=

# Demo wallet for testnet scripts (Base Sepolia only)
# Fund via https://faucet.circle.com (USDC) + Sepolia faucet (ETH)
DEMO_WALLET_PRIVATE_KEY=
